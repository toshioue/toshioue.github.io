<?php

 ?>

<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="icon" href="img/favicon.png" type="image/png">
        <title>Blog Details</title>
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="vendors/linericon/style.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <link rel="stylesheet" href="vendors/lightbox/simpleLightbox.css">
        <link rel="stylesheet" href="vendors/nice-select/css/nice-select.css">
        <!-- main css -->
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/responsive.css">
        <link href="https://getbootstrap.com/docs/4.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    </head>
<body>

        <!--================ Start Header Menu Area =================-->
        <header class="header_area">
            <div class="main_menu">
                <div class="container">
                    <nav class="navbar navbar-expand-lg navbar-light">
                        <div class="container">
                            <!-- Brand and toggle get grouped for better mobile display -->
                            <a class="navbar-brand logo_h" href="index.html"><img src="img/logo.png" alt=""></a>
                            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                            <!-- Collect the nav links, forms, and other content for toggling -->
                            <div class="collapse navbar-collapse offset" id="navbarSupportedContent">
                                <ul class="nav navbar-nav menu_nav ml-auto">
                                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                                    <li class="nav-item"><a class="nav-link" href="about-us.html">About</a></li>
                                    <li class="nav-item"><a class="nav-link" href="causes.html">Causes</a>
                                    <li class="nav-item active"><a class="nav-link" href="blog.php">Press Release</a>
                                    <li class="nav-item"><a class="nav-link" href="contact.php">Contact</a></li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </header>
        <!--================ End Header Menu Area =================-->

        <!--================ Home Banner Area =================-->
        <section class="banner_area">
            <div class="banner_inner d-flex align-items-center">
                <div class="overlay bg-parallax" data-stellar-ratio="0.9" data-stellar-vertical-offset="0" data-background=""></div>
                <div class="container">
                    <div class="banner_content text-center">
                        <h2>Blog Details</h2>
                        <p>Stay informed with KOHWA's latest updates</p>
                    </div>
                </div>
            </div>
        </section>
        <!--================ End Home Banner Area =================-->

        <!--================Blog Area =================-->
        <section class="blog_area single-post-area section_gap">
            <h1 id="title" class="h1 text-center text-dark mr-2">Place Holder</h1>
            <small id="date" class="text-center ml-4">Date Placeholder</small><hr>
            <div id="editorjs" class="m-4"></div>
        </section>


         <!--================ Start footer Area  =================-->
    <footer>
            <div class="footer-area">
                <div class="container">
                    <div class="row section_gap">
                        <div class="col-lg-3 col-md-6 col-sm-6">
                            <div class="single-footer-widget tp_widgets">
                                <h4 class="footer_title large_title ">Our Mission</h4>
                                <p class="text-secondary">
                                  We work with communites to improve sustainable practices and promote environmental stewardship through
                                    alternative livelihoods and community education on health, environment, and cultural heritage in Pohnpei.
                                </p>
                            </div>
                        </div>
                        <div class="offset-lg-1 col-lg-2 col-md-6 col-sm-6">
                            <div class="single-footer-widget tp_widgets">
                                <h4 class="footer_title">Quick Links</h4>
                                <ul class="list">
                                  <li><a href="index.html">Home</a></li>
                                  <li><a href="about-us.html">About</a></li>
                                  <li><a href="causes.html">Causes</a></li>
                                  <li><a href="blog.php">Press Release</a></li>
                                  <li><a href="contact.php">Contact</a></li>
                                  <li><a href="login.php">Login</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-6 col-sm-6">
                            <div class="single-footer-widget instafeed">
                                <h4 class="footer_title">Gallery</h6>
                                <ul class="list instafeed d-flex flex-wrap">
                                    <li><img src="img/gallery/g1.jpg" alt=""></li>
                                    <li><img src="img/gallery/g2.jpg" alt=""></li>
                               </ul>
                            </div>
                        </div>
                        <div class="offset-lg-1 col-lg-3 col-md-6 col-sm-6">
                          <div class="single-footer-widget tp_widgets text-secondary">
                              <h4 class="footer_title">Contact Us</h4>
                              <div class="ml-40">
                                  <p class="sm-head">
                                      <span class="fa fa-location-arrow"></span>
                                      Head Office
                                  </p>
                                  <p>Kolonia, Pohnpei Federated States of Micronesia 96941</p>

                                  <p class="sm-head">
                                      <span class="fa fa-phone"></span>
                                      Phone Number
                                  </p>
                                  <p>
                                    (691) 921-4522
                                  </p>

                                  <p class="sm-head">
                                    <span class="fa fa-envelope"></span>
                                    Email
                                  </p>
                                  <p>
                                    kohwa-fsm@gmail.com <br>
                                    www.kohwa-fsm.org
                                  </p>
                              </div>
                          </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="container">
                    <div class="row d-flex">
                        <p class="col-lg-12 footer-text text-center">
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | KOHWA | template by <a href="https://colorlib.com" target="_blank">Colorlib</a> | developed by <a href="https://github.com/toshioue" target="_blank">toshioue</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
                    </div>
                </div>
            </div>
        </footer>
        <!--================ End footer Area  =================-->




        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="js/jquery-3.2.1.min.js"></script>
        <script src="js/popper.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/stellar.js"></script>
        <script src="vendors/lightbox/simpleLightbox.min.js"></script>
        <script src="vendors/nice-select/js/jquery.nice-select.min.js"></script>
        <script src="js/jquery.ajaxchimp.min.js"></script>
        <script src="js/mail-script.js"></script>
        <script src="js/theme.js"></script>
        <!--custom js-->
        <script src="js/ajax.js"></script>
        <!-- Load Tools -->
        <!--
         You can upload Tools to your project's directory and use as in example below.
         Also you can load each Tool from CDN or use NPM/Yarn packages.
         Read more in Tool's README file. For example:
         https://github.com/editor-js/header#installation
         -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/header@latest"></script><!-- Header -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/simple-image@latest"></script><!-- Image -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/delimiter@latest"></script><!-- Delimiter -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/list@latest"></script><!-- List -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/checklist@latest"></script><!-- Checklist -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/quote@latest"></script><!-- Quote -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/code@latest"></script><!-- Code -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/embed@latest"></script><!-- Embed -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/table@latest"></script><!-- Table -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/link@latest"></script><!-- Link -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/warning@latest"></script><!-- Warning -->

        <script src="https://cdn.jsdelivr.net/npm/@editorjs/marker@latest"></script><!-- Marker -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/inline-code@latest"></script><!-- Inline Code -->

        <script src="js/editor.js"></script>


        <!-- Initialize editor.js -->
        <script>


    <?php
    if(isset($_GET['postID'])){
    $postID = $_GET['postID'];
    echo 'AJAX_GET("server.php", {"postID" : ' . $postID . '}, loadPost, "");';
    }
    ?>

    function loadPost(result){
      result = JSON.parse(result);
      var content = result[0];
      content = JSON.parse(content);
      var arr = content.split("}}");
      var date = result[1];
      var title = result[2];
      $('#title').text(title);
      $('#date').text("Last Updated : " + date);
      console.log(result);
      console.log(content);
      //console.log(arr[0].concat('}}'));
      console.log(arr);
      for(var i = 0; i < arr.length; i++){
        if(i >= 1){
          arr[i] = arr[i].replace(',', '');
        }

        arr[i] = arr[i].concat('}}');

      //  console.log(arr[i]);
      }
      console.log(arr.pop());
      console.log(arr);
      console.log(arr[arr.length-1]);


      /*for(var i in content){

        console.log(content[i]);
      }*/
      var editor = new EditorJS({
          /**
           * Create a holder for the Editor and pass its ID
           */
          holder : 'editorjs',

          /**
           * Common Inline Toolbar settings
           * - if true (or not specified), the order from 'tool' property will be used
           * - if an array of tool names, this order will be used
           */
          // inlineToolbar: ['link', 'marker', 'bold', 'italic'],
          // inlineToolbar: true,


          /**
           * Available Tools list.
           * Pass Tool's class or Settings object for each Tool you want to use
           */
           tools: {
             /**
              * Each Tool is a Plugin. Pass them via 'class' option with necessary settings {@link docs/tools.md}
              */
             header: {
               class: Header,
               config: {
                 placeholder: 'Enter a header',
                 levels: [2, 3, 4],
                 defaultLevel: 3
               }

             },

             /**
              * Or pass class directly without any configuration
              */
              image: {
             class: SimpleImage,

           },

             list: {
               class: List,
               inlineToolbar: true,
               shortcut: 'CMD+SHIFT+L'
             },

             checklist: {
               class: Checklist,
               inlineToolbar: true,
             },

             quote: {
               class: Quote,
               inlineToolbar: true,
               config: {
                 quotePlaceholder: 'Enter a quote',
                 captionPlaceholder: 'Quote\'s author',
               },
               shortcut: 'CMD+SHIFT+O'
             },

             warning: Warning,

             marker: {
               class:  Marker,
               shortcut: 'CMD+SHIFT+M'
             },

             code: {
               class:  CodeTool,
               shortcut: 'CMD+SHIFT+C'
             },

             delimiter: Delimiter,

             inlineCode: {
               class: InlineCode,
               shortcut: 'CMD+SHIFT+C'
             },

             linkTool: LinkTool,

             embed: Embed,

             table: {
               class: Table,
               inlineToolbar: true,
               shortcut: 'CMD+ALT+T'
             },
              // ...
          },

          /**
           * Previously saved data that should be rendered
           */
          data: {

             }
      });




    //editor is async load, using statement below to debug whether editor.js loads
    editor.isReady
      .then(() => {
        console.log('Editor.js is ready to work!')
          for (var i in arr){
          editor.blocks.insert(JSON.parse(arr[i]).type, JSON.parse(arr[i]).data);
          }
          editor.readOnly.toggle();
        //this.render();
        /** Do anything you need after editor initialization */
      })
      .catch((reason) => {
        console.log(`Editor.js initialization failed because of ${reason}`)
      });



}



        </script>

    </body>
</html>
